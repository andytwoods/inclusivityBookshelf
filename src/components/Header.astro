---
import DarkModeToggle from "./DarkModeToggle.astro";

interface Props {
  currentPath: string;
}

const { currentPath } = Astro.props;

const navItems = [
  { href: "#top", label: "Home" },
  { href: "#contact", label: "Contact" },
];
---

<header class="site-header" role="banner">
  <div class="container header-inner">
    <a href="/" class="site-logo" aria-label="Inclusivity Bookshelf â€” home">
      Inclusivity Bookshelf
    </a>

    <button
      class="menu-toggle"
      aria-expanded="false"
      aria-controls="site-nav"
      aria-label="Open menu"
    >
      <span aria-hidden="true">&#9776;</span>
    </button>

    <nav id="site-nav" class="site-nav" aria-label="Main navigation">
      <ul class="nav-list">
        {
          navItems.map(({ href, label }) => (
            <li>
              <a
                href={href}
              >
                {label}
              </a>
            </li>
          ))
        }
        <li>
          <DarkModeToggle />
        </li>
      </ul>
    </nav>
  </div>
</header>

<script>
  const toggle = document.querySelector(".menu-toggle");
  const nav = document.getElementById("site-nav");

  if (toggle && nav) {
    toggle.addEventListener("click", () => {
      const expanded = toggle.getAttribute("aria-expanded") === "true";
      toggle.setAttribute("aria-expanded", String(!expanded));
      toggle.setAttribute(
        "aria-label",
        expanded ? "Open menu" : "Close menu"
      );
      nav.classList.toggle("is-open");
    });

    // Close mobile menu when a nav link is clicked
    nav.querySelectorAll("a").forEach((link) => {
      link.addEventListener("click", () => {
        nav.classList.remove("is-open");
        toggle.setAttribute("aria-expanded", "false");
        toggle.setAttribute("aria-label", "Open menu");
      });
    });
  }
</script>
